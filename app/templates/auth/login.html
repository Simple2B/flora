{% extends 'base.html' %}

{% block header %}

<header class="header">
  <div class="container">
    <div class="header__inner">
      <div class="header__inner--left">
        <a class="logo" href="#">
          <img src="{{ url_for('static', filename='images/logo.svg') }}" alt="DDB Contracting" class="logo__img">
        </a>
        <nav class="menu__items">
            <a class="menu__item" href="{{ url_for('main.index') }}">Bidding</a>
            <a class="menu__item" href="#">My team</a>
            <a class="menu__item" href="#">Resources</a>
            <span class="nav-indicator"></span>
        </nav>
      </div>
      {% if current_user.is_authenticated %}
      <div class="header__inner--right">
        <div class="user-info">
          <div class="user-info__img">
            <img src="{{ url_for('static', filename='images/user-icon.svg') }}" alt="Icon">
          </div>
          <div class="user-info__details">
            <p>{{current_user.username}}</p>
            <p class='t-gray'>{{current_user.position}}</p>
          </div>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
</header>
{% endblock %}
{% block content %}

<section class="page-section login">
  <div class="_container">
    <div class="login__inner">
      <div class="login__title">
        <p class="login__title--welcome">Welcome</p>
        <p class="login__title--DDB">DDB Bidding Manager</p>
      </div>
      <form class="login__form" action="{{ url_for('auth.login') }}" method="POST">
        <div class="">
          {{form.user_id(class='_form-input _form-input--lg')}}
          <label class="_label">Username</label>
        </div>
        <div>
          {{form.password(class='_form-input _form-input--lg')}}
          <label class="_label">Password</label>
        </div>

        {{form.submit(class='_btn--dgrey _btn--lg')}}

        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <hr>
            {% for category, message in messages %}
              <div class="alert alert-{{ category }} alert-dismisible login__error">
                <button type="button" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true"><img src="{{ url_for('static', filename='images/close_button_ddb.svg') }}"></span>
                </button>
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
      </form>
    </div>
  </div>
</section>

{% endblock %}